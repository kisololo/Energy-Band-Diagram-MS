<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<!-- Load GA4 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7SJTF762GX"></script>

<script>
// Initialize GA4
window.dataLayer = window.dataLayer || [];
function gtag(){ dataLayer.push(arguments); }
gtag('js', new Date());

// GA4 fix: use parent URL instead of about:srcdoc
gtag('config', 'G-7SJTF762GX', {
    'cookie_domain': 'auto',
    'page_location': window.parent.location.href,
    'debug_mode': true
});

// Streamlit handshake (initial)
window.parent.postMessage({ type: "streamlit:componentReady" }, "*");
</script>

<style>
html, body {
    margin: 0;
    padding: 0;
    height: 1px !important;
    overflow: hidden;
}
</style>

</head>
<body>

<!-- ⭐ KEEP-ALIVE HACK ⭐ -->
<script>
// Continually ping Streamlit to keep the iframe alive longer
setInterval(() => {
    try {
        window.parent.postMessage(
            { type: "streamlit:renderEvent" },
            "*"
        );
    } catch (err) {
        console.error("Keep-alive ping failed:", err);
    }
}, 500); // Ping every 500 ms
</script>

</body>
</html>
