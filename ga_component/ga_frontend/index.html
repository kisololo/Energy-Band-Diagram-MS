<!DOCTYPE html>
<html>
<head>
<style>
html, body {
    margin: 0;
    padding: 0;
    height: 1px !important;
    overflow: hidden;
}
iframe {
    height: 1px !important;
}
</style>

<script>
// 1. Tell Streamlit the component is alive IMMEDIATELY
window.parent.postMessage({type: "GA4_PING"}, "*");

// 2. Load GA4 **after** Streamlit finishes mounting (~10ms delay)
setTimeout(() => {

    // GA4 loader
    const s = document.createElement("script");
    s.async = true;
    s.src = "https://www.googletagmanager.com/gtag/js?id=G-7SJTF762GX";
    document.head.appendChild(s);

    // GA4 config
    const cfg = document.createElement("script");
    cfg.innerHTML = `
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-7SJTF762GX');
    `;
    document.head.appendChild(cfg);

    // Optional: Tell Streamlit GA4 finished
    window.parent.postMessage({type: "GA4_READY"}, "*");

}, 10);  // <-- small delay fixes shine + timeout

</script>
</head>

<body></body>
</html>
